@model Imposter.Core.Domain.Entities.SecretWord

@{
    ViewData["Title"] = "SecretWord";
    var isHost = ViewBag.IsHost;
    var roomId = ViewBag.roomId;
    var IsImposter = ViewBag.IsImposter;
    var Word = ((bool)IsImposter ? "IMPOSTER" : Model.Text);
}



<div class="container py-5 mt-5">

    <div class="col d-flex flex-column align-items-center gap-5" style="margin-top: 10vh !important;">
        <button id="toggleBtn" class="btn btn-neon px-4 py-2 rounded-pill" style="margin-top: 20vh !important;">
            Show
        </button>

        <div id="wordBox" class="mt-4 text-white fw-bold"
        style="font-size:2rem; display:none;">
            @Word
        </div>
        @if (isHost)
        {
            <button id="toggleBtn" class="btn btn-neon px-4 py-2 rounded-pill">
                Next
            </button>
        }
    </div>
    
</div>

@section Scripts {
    <script>
        const btn   = document.getElementById('toggleBtn');
        const box   = document.getElementById('wordBox');
        let visible = false;

        btn.addEventListener('click', () => {
            visible = !visible;
            box.style.display = visible ? 'block' : 'none';
            btn.textContent   = visible ? 'Hide'  : 'Show';
        });
    </script>
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
<script>
    var connection = new signalR.HubConnectionBuilder()
        .withUrl("/gameHub")
        .build();
    connection.start()
    .then(() => console.log("SignalR connected"))
    .catch(err => console.error(err.toString()));
    // Handle incoming messages

    connection.on("NextStage" , (page)=>{
        debugger;

        redirectPost(`/room/@roomId/${page}`, {});
        // navigate manually
    });




    function Next() {
        connection.invoke("NextStage","@roomId")
            .catch(err => console.error(err.toString()));
    }
</script>